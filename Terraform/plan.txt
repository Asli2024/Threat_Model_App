module.vpc.data.aws_iam_policy_document.vpc_flow_logs_role_default: Reading...
module.vpc.data.aws_caller_identity.current: Reading...
data.aws_region.current: Reading...
data.aws_caller_identity.current: Reading...
data.aws_availability_zones.available: Reading...
module.gateway_endpoints.data.aws_caller_identity.current: Reading...
module.route53_new_zone.data.aws_route53_zone.parent: Reading...
data.aws_ec2_managed_prefix_list.cf_origin: Reading...
module.vpc.data.aws_iam_policy_document.vpc_flow_logs_role_default: Read complete after 0s [id=3253318109]
data.aws_region.current: Read complete after 0s [id=eu-west-2]
module.vpc.data.aws_availability_zones.available: Reading...
module.interface_endpoints.data.aws_caller_identity.current: Reading...
module.vpc.data.aws_region.current: Reading...
module.vpc.data.aws_region.current: Read complete after 0s [id=eu-west-2]
module.vpc.data.aws_iam_policy_document.vpc_flow_logs_assume_default: Reading...
module.vpc.data.aws_iam_policy_document.vpc_flow_logs_assume_default: Read complete after 0s [id=2717921857]
module.vpc.data.aws_caller_identity.current: Read complete after 0s [id=175798131198]
module.vpc.data.aws_iam_policy_document.vpc_flow_logs_kms_default: Reading...
module.vpc.data.aws_iam_policy_document.vpc_flow_logs_kms_default: Read complete after 0s [id=1057905317]
data.aws_caller_identity.current: Read complete after 0s [id=175798131198]
module.gateway_endpoints.data.aws_caller_identity.current: Read complete after 0s [id=175798131198]
module.interface_endpoints.data.aws_caller_identity.current: Read complete after 0s [id=175798131198]
data.aws_acm_certificate.cloudfront_cert: Reading...
data.aws_availability_zones.available: Read complete after 0s [id=eu-west-2]
module.vpc.data.aws_availability_zones.available: Read complete after 0s [id=eu-west-2]
data.aws_ec2_managed_prefix_list.cf_origin: Read complete after 0s [id=pl-93a247fa]
module.route53_new_zone.data.aws_route53_zone.parent: Read complete after 1s [id=Z026992313GOBRYA4Z0QR]
data.aws_acm_certificate.cloudfront_cert: Read complete after 1s [id=arn:aws:acm:us-east-1:175798131198:certificate/87834167-ec98-4640-83b1-be96bbd231cf]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
 <= read (data resources)

Terraform planned the following actions, but then encountered a problem:

  # module.acm_alb.aws_acm_certificate.cert will be created
  + resource "aws_acm_certificate" "cert" {
      + arn                       = (known after apply)
      + domain_name               = "threatcomposer.techwithaden.com"
      + domain_validation_options = [
          + {
              + domain_name           = "threatcomposer.techwithaden.com"
              + resource_record_name  = (known after apply)
              + resource_record_type  = (known after apply)
              + resource_record_value = (known after apply)
            },
        ]
      + id                        = (known after apply)
      + key_algorithm             = (known after apply)
      + not_after                 = (known after apply)
      + not_before                = (known after apply)
      + pending_renewal           = (known after apply)
      + renewal_eligibility       = (known after apply)
      + renewal_summary           = (known after apply)
      + status                    = (known after apply)
      + subject_alternative_names = [
          + "threatcomposer.techwithaden.com",
        ]
      + tags_all                  = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + type                      = (known after apply)
      + validation_emails         = (known after apply)
      + validation_method         = "DNS"

      + options (known after apply)
    }

  # module.acm_alb.aws_acm_certificate_validation.validated will be created
  + resource "aws_acm_certificate_validation" "validated" {
      + certificate_arn         = (known after apply)
      + id                      = (known after apply)
      + validation_record_fqdns = (known after apply)

      + timeouts {
          + create = "2h"
        }
    }

  # module.acm_alb.aws_route53_record.cert_validation["threatcomposer.techwithaden.com"] will be created
  + resource "aws_route53_record" "cert_validation" {
      + allow_overwrite = (known after apply)
      + fqdn            = (known after apply)
      + id              = (known after apply)
      + name            = (known after apply)
      + records         = (known after apply)
      + ttl             = 60
      + type            = (known after apply)
      + zone_id         = (known after apply)
    }

  # module.alb.aws_lb.this will be created
  + resource "aws_lb" "this" {
      + arn                                                          = (known after apply)
      + arn_suffix                                                   = (known after apply)
      + client_keep_alive                                            = 3600
      + desync_mitigation_mode                                       = "defensive"
      + dns_name                                                     = (known after apply)
      + drop_invalid_header_fields                                   = true
      + enable_deletion_protection                                   = false
      + enable_http2                                                 = true
      + enable_tls_version_and_cipher_suite_headers                  = false
      + enable_waf_fail_open                                         = false
      + enable_xff_client_port                                       = false
      + enable_zonal_shift                                           = false
      + enforce_security_group_inbound_rules_on_private_link_traffic = (known after apply)
      + id                                                           = (known after apply)
      + idle_timeout                                                 = 60
      + internal                                                     = true
      + ip_address_type                                              = (known after apply)
      + load_balancer_type                                           = "application"
      + name                                                         = "ThreatComposer-ALB"
      + name_prefix                                                  = (known after apply)
      + preserve_host_header                                         = false
      + security_groups                                              = (known after apply)
      + subnets                                                      = (known after apply)
      + tags_all                                                     = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id                                                       = (known after apply)
      + xff_header_processing_mode                                   = "append"
      + zone_id                                                      = (known after apply)

      + subnet_mapping (known after apply)
    }

  # module.alb.aws_lb_listener.https will be created
  + resource "aws_lb_listener" "https" {
      + arn                                                                   = (known after apply)
      + certificate_arn                                                       = (known after apply)
      + id                                                                    = (known after apply)
      + load_balancer_arn                                                     = (known after apply)
      + port                                                                  = 443
      + protocol                                                              = "HTTPS"
      + routing_http_request_x_amzn_mtls_clientcert_header_name               = (known after apply)
      + routing_http_request_x_amzn_mtls_clientcert_issuer_header_name        = (known after apply)
      + routing_http_request_x_amzn_mtls_clientcert_leaf_header_name          = (known after apply)
      + routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name = (known after apply)
      + routing_http_request_x_amzn_mtls_clientcert_subject_header_name       = (known after apply)
      + routing_http_request_x_amzn_mtls_clientcert_validity_header_name      = (known after apply)
      + routing_http_request_x_amzn_tls_cipher_suite_header_name              = (known after apply)
      + routing_http_request_x_amzn_tls_version_header_name                   = (known after apply)
      + routing_http_response_access_control_allow_credentials_header_value   = (known after apply)
      + routing_http_response_access_control_allow_headers_header_value       = (known after apply)
      + routing_http_response_access_control_allow_methods_header_value       = (known after apply)
      + routing_http_response_access_control_allow_origin_header_value        = (known after apply)
      + routing_http_response_access_control_expose_headers_header_value      = (known after apply)
      + routing_http_response_access_control_max_age_header_value             = (known after apply)
      + routing_http_response_content_security_policy_header_value            = (known after apply)
      + routing_http_response_server_enabled                                  = (known after apply)
      + routing_http_response_strict_transport_security_header_value          = (known after apply)
      + routing_http_response_x_content_type_options_header_value             = (known after apply)
      + routing_http_response_x_frame_options_header_value                    = (known after apply)
      + ssl_policy                                                            = "ELBSecurityPolicy-TLS-1-2-Ext-2018-06"
      + tags_all                                                              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + tcp_idle_timeout_seconds                                              = (known after apply)

      + default_action {
          + order            = (known after apply)
          + target_group_arn = (known after apply)
          + type             = "forward"
        }

      + mutual_authentication (known after apply)
    }

  # module.alb.aws_lb_target_group.this will be created
  + resource "aws_lb_target_group" "this" {
      + arn                                = (known after apply)
      + arn_suffix                         = (known after apply)
      + connection_termination             = (known after apply)
      + deregistration_delay               = "300"
      + id                                 = (known after apply)
      + ip_address_type                    = (known after apply)
      + lambda_multi_value_headers_enabled = false
      + load_balancer_arns                 = (known after apply)
      + load_balancing_algorithm_type      = (known after apply)
      + load_balancing_anomaly_mitigation  = (known after apply)
      + load_balancing_cross_zone_enabled  = (known after apply)
      + name                               = "web-targets"
      + name_prefix                        = (known after apply)
      + port                               = 443
      + preserve_client_ip                 = (known after apply)
      + protocol                           = "HTTPS"
      + protocol_version                   = (known after apply)
      + proxy_protocol_v2                  = false
      + slow_start                         = 0
      + tags_all                           = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + target_type                        = "ip"
      + vpc_id                             = (known after apply)

      + health_check {
          + enabled             = true
          + healthy_threshold   = 2
          + interval            = 30
          + matcher             = "200"
          + path                = "/"
          + port                = "traffic-port"
          + protocol            = "HTTPS"
          + timeout             = 5
          + unhealthy_threshold = 2
        }

      + stickiness (known after apply)

      + target_failover (known after apply)

      + target_group_health (known after apply)

      + target_health_state (known after apply)
    }

  # module.alb_sg.aws_security_group.this will be created
  + resource "aws_security_group" "this" {
      + arn                    = (known after apply)
      + description            = "ALB security group"
      + egress                 = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "Allow all outbound traffic"
              + from_port        = 0
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "-1"
              + security_groups  = []
              + self             = false
              + to_port          = 0
            },
        ]
      + id                     = (known after apply)
      + ingress                = [
          + {
              + cidr_blocks      = []
              + description      = "Allow HTTPS traffic"
              + from_port        = 443
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = [
                  + "pl-93a247fa",
                ]
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 443
            },
        ]
      + name                   = "ALB_SECURITY_GROUP"
      + name_prefix            = (known after apply)
      + owner_id               = (known after apply)
      + revoke_rules_on_delete = false
      + tags_all               = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id                 = (known after apply)
    }

  # module.application_sg.aws_security_group.this will be created
  + resource "aws_security_group" "this" {
      + arn                    = (known after apply)
      + description            = "Application security group for ECS service"
      + egress                 = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "Allow all outbound traffic within the VPC"
              + from_port        = 0
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "-1"
              + security_groups  = []
              + self             = false
              + to_port          = 0
            },
        ]
      + id                     = (known after apply)
      + ingress                = [
          + {
              + cidr_blocks      = []
              + description      = "Allow traffic from ALB"
              + from_port        = 3000
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = (known after apply)
              + self             = false
              + to_port          = 3000
            },
        ]
      + name                   = "APP_SECURITY_GROUP"
      + name_prefix            = (known after apply)
      + owner_id               = (known after apply)
      + revoke_rules_on_delete = false
      + tags_all               = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id                 = (known after apply)
    }

  # module.cloudfront.aws_cloudfront_distribution.this will be created
  + resource "aws_cloudfront_distribution" "this" {
      + aliases                         = [
          + "threatcomposer.techwithaden.com",
        ]
      + arn                             = (known after apply)
      + caller_reference                = (known after apply)
      + comment                         = "Threat Composer App CloudFront Distribution"
      + continuous_deployment_policy_id = (known after apply)
      + domain_name                     = (known after apply)
      + enabled                         = true
      + etag                            = (known after apply)
      + hosted_zone_id                  = (known after apply)
      + http_version                    = "http2"
      + id                              = (known after apply)
      + in_progress_validation_batches  = (known after apply)
      + is_ipv6_enabled                 = true
      + last_modified_time              = (known after apply)
      + price_class                     = "PriceClass_100"
      + retain_on_delete                = false
      + staging                         = false
      + status                          = (known after apply)
      + tags_all                        = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + trusted_key_groups              = (known after apply)
      + trusted_signers                 = (known after apply)
      + wait_for_deployment             = true

      + default_cache_behavior {
          + allowed_methods        = [
              + "GET",
              + "HEAD",
              + "OPTIONS",
            ]
          + cached_methods         = [
              + "GET",
              + "HEAD",
            ]
          + compress               = false
          + default_ttl            = 3600
          + max_ttl                = 86400
          + min_ttl                = 0
          + target_origin_id       = "origin-1"
          + trusted_key_groups     = (known after apply)
          + trusted_signers        = (known after apply)
          + viewer_protocol_policy = "redirect-to-https"

          + forwarded_values {
              + headers                 = (known after apply)
              + query_string            = false
              + query_string_cache_keys = (known after apply)

              + cookies {
                  + forward           = "none"
                  + whitelisted_names = (known after apply)
                }
            }

          + grpc_config (known after apply)
        }

      + origin {
          + connection_attempts      = 3
          + connection_timeout       = 10
          + domain_name              = (known after apply)
          + origin_id                = "origin-1"
            # (2 unchanged attributes hidden)

          + custom_origin_config {
              + http_port                = 80
              + https_port               = 443
              + origin_keepalive_timeout = 5
              + origin_protocol_policy   = "https-only"
              + origin_read_timeout      = 30
              + origin_ssl_protocols     = [
                  + "TLSv1.2",
                ]
            }
        }

      + restrictions {
          + geo_restriction {
              + locations        = (known after apply)
              + restriction_type = "none"
            }
        }

      + viewer_certificate {
          + acm_certificate_arn      = "arn:aws:acm:us-east-1:175798131198:certificate/87834167-ec98-4640-83b1-be96bbd231cf"
          + minimum_protocol_version = "TLSv1.2_2021"
          + ssl_support_method       = "sni-only"
        }
    }

  # module.cloudfront.aws_cloudfront_vpc_origin.alb will be created
  + resource "aws_cloudfront_vpc_origin" "alb" {
      + arn      = (known after apply)
      + etag     = (known after apply)
      + id       = (known after apply)
      + tags_all = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }

      + vpc_origin_endpoint_config {
          + arn                    = (known after apply)
          + http_port              = 80
          + https_port             = 443
          + name                   = "alb-vpc-origin"
          + origin_protocol_policy = "https-only"

          + origin_ssl_protocols {
              + items    = [
                  + "TLSv1.2",
                ]
              + quantity = 1
            }
        }
    }

  # module.gateway_endpoints.aws_vpc_endpoint.gateway will be created
  + resource "aws_vpc_endpoint" "gateway" {
      + arn                   = (known after apply)
      + cidr_blocks           = (known after apply)
      + dns_entry             = (known after apply)
      + id                    = (known after apply)
      + ip_address_type       = (known after apply)
      + network_interface_ids = (known after apply)
      + owner_id              = (known after apply)
      + policy                = (known after apply)
      + prefix_list_id        = (known after apply)
      + private_dns_enabled   = (known after apply)
      + requester_managed     = (known after apply)
      + route_table_ids       = (known after apply)
      + security_group_ids    = (known after apply)
      + service_name          = "com.amazonaws.eu-west-2.s3"
      + service_region        = (known after apply)
      + state                 = (known after apply)
      + subnet_ids            = (known after apply)
      + tags_all              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_endpoint_type     = "Gateway"
      + vpc_id                = (known after apply)

      + dns_options (known after apply)

      + subnet_configuration (known after apply)
    }

  # module.interface_endpoints.data.aws_iam_policy_document.default_vpce_policy["com.amazonaws.eu-west-2.ecr.api"] will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "default_vpce_policy" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "*",
            ]
          + effect    = "Allow"
          + resources = [
              + "*",
            ]
          + sid       = "AllowOnlyFromThisVPC"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + (known after apply),
                ]
              + variable = "aws:SourceVpc"
            }

          + principals {
              + identifiers = [
                  + "arn:aws:iam::175798131198:root",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.interface_endpoints.data.aws_iam_policy_document.default_vpce_policy["com.amazonaws.eu-west-2.ecr.dkr"] will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "default_vpce_policy" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "*",
            ]
          + effect    = "Allow"
          + resources = [
              + "*",
            ]
          + sid       = "AllowOnlyFromThisVPC"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + (known after apply),
                ]
              + variable = "aws:SourceVpc"
            }

          + principals {
              + identifiers = [
                  + "arn:aws:iam::175798131198:root",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.interface_endpoints.data.aws_iam_policy_document.default_vpce_policy["com.amazonaws.eu-west-2.ecs"] will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "default_vpce_policy" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "*",
            ]
          + effect    = "Allow"
          + resources = [
              + "*",
            ]
          + sid       = "AllowOnlyFromThisVPC"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + (known after apply),
                ]
              + variable = "aws:SourceVpc"
            }

          + principals {
              + identifiers = [
                  + "arn:aws:iam::175798131198:root",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.interface_endpoints.data.aws_iam_policy_document.default_vpce_policy["com.amazonaws.eu-west-2.elasticloadbalancing"] will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "default_vpce_policy" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "*",
            ]
          + effect    = "Allow"
          + resources = [
              + "*",
            ]
          + sid       = "AllowOnlyFromThisVPC"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + (known after apply),
                ]
              + variable = "aws:SourceVpc"
            }

          + principals {
              + identifiers = [
                  + "arn:aws:iam::175798131198:root",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.interface_endpoints.data.aws_iam_policy_document.default_vpce_policy["com.amazonaws.eu-west-2.kms"] will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "default_vpce_policy" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "*",
            ]
          + effect    = "Allow"
          + resources = [
              + "*",
            ]
          + sid       = "AllowOnlyFromThisVPC"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + (known after apply),
                ]
              + variable = "aws:SourceVpc"
            }

          + principals {
              + identifiers = [
                  + "arn:aws:iam::175798131198:root",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.interface_endpoints.data.aws_iam_policy_document.default_vpce_policy["com.amazonaws.eu-west-2.logs"] will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "default_vpce_policy" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "*",
            ]
          + effect    = "Allow"
          + resources = [
              + "*",
            ]
          + sid       = "AllowOnlyFromThisVPC"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + (known after apply),
                ]
              + variable = "aws:SourceVpc"
            }

          + principals {
              + identifiers = [
                  + "arn:aws:iam::175798131198:root",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.interface_endpoints.data.aws_iam_policy_document.default_vpce_policy["com.amazonaws.eu-west-2.monitoring"] will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "default_vpce_policy" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "*",
            ]
          + effect    = "Allow"
          + resources = [
              + "*",
            ]
          + sid       = "AllowOnlyFromThisVPC"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + (known after apply),
                ]
              + variable = "aws:SourceVpc"
            }

          + principals {
              + identifiers = [
                  + "arn:aws:iam::175798131198:root",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.interface_endpoints.aws_vpc_endpoint.this["com.amazonaws.eu-west-2.ecr.api"] will be created
  + resource "aws_vpc_endpoint" "this" {
      + arn                   = (known after apply)
      + cidr_blocks           = (known after apply)
      + dns_entry             = (known after apply)
      + id                    = (known after apply)
      + ip_address_type       = "ipv4"
      + network_interface_ids = (known after apply)
      + owner_id              = (known after apply)
      + policy                = (known after apply)
      + prefix_list_id        = (known after apply)
      + private_dns_enabled   = true
      + requester_managed     = (known after apply)
      + route_table_ids       = (known after apply)
      + security_group_ids    = (known after apply)
      + service_name          = "com.amazonaws.eu-west-2.ecr.api"
      + service_region        = (known after apply)
      + state                 = (known after apply)
      + subnet_ids            = (known after apply)
      + tags_all              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_endpoint_type     = "Interface"
      + vpc_id                = (known after apply)

      + dns_options (known after apply)

      + subnet_configuration (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint.this["com.amazonaws.eu-west-2.ecr.dkr"] will be created
  + resource "aws_vpc_endpoint" "this" {
      + arn                   = (known after apply)
      + cidr_blocks           = (known after apply)
      + dns_entry             = (known after apply)
      + id                    = (known after apply)
      + ip_address_type       = "ipv4"
      + network_interface_ids = (known after apply)
      + owner_id              = (known after apply)
      + policy                = (known after apply)
      + prefix_list_id        = (known after apply)
      + private_dns_enabled   = true
      + requester_managed     = (known after apply)
      + route_table_ids       = (known after apply)
      + security_group_ids    = (known after apply)
      + service_name          = "com.amazonaws.eu-west-2.ecr.dkr"
      + service_region        = (known after apply)
      + state                 = (known after apply)
      + subnet_ids            = (known after apply)
      + tags_all              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_endpoint_type     = "Interface"
      + vpc_id                = (known after apply)

      + dns_options (known after apply)

      + subnet_configuration (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint.this["com.amazonaws.eu-west-2.ecs"] will be created
  + resource "aws_vpc_endpoint" "this" {
      + arn                   = (known after apply)
      + cidr_blocks           = (known after apply)
      + dns_entry             = (known after apply)
      + id                    = (known after apply)
      + ip_address_type       = "ipv4"
      + network_interface_ids = (known after apply)
      + owner_id              = (known after apply)
      + policy                = (known after apply)
      + prefix_list_id        = (known after apply)
      + private_dns_enabled   = true
      + requester_managed     = (known after apply)
      + route_table_ids       = (known after apply)
      + security_group_ids    = (known after apply)
      + service_name          = "com.amazonaws.eu-west-2.ecs"
      + service_region        = (known after apply)
      + state                 = (known after apply)
      + subnet_ids            = (known after apply)
      + tags_all              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_endpoint_type     = "Interface"
      + vpc_id                = (known after apply)

      + dns_options (known after apply)

      + subnet_configuration (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint.this["com.amazonaws.eu-west-2.elasticloadbalancing"] will be created
  + resource "aws_vpc_endpoint" "this" {
      + arn                   = (known after apply)
      + cidr_blocks           = (known after apply)
      + dns_entry             = (known after apply)
      + id                    = (known after apply)
      + ip_address_type       = "ipv4"
      + network_interface_ids = (known after apply)
      + owner_id              = (known after apply)
      + policy                = (known after apply)
      + prefix_list_id        = (known after apply)
      + private_dns_enabled   = true
      + requester_managed     = (known after apply)
      + route_table_ids       = (known after apply)
      + security_group_ids    = (known after apply)
      + service_name          = "com.amazonaws.eu-west-2.elasticloadbalancing"
      + service_region        = (known after apply)
      + state                 = (known after apply)
      + subnet_ids            = (known after apply)
      + tags_all              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_endpoint_type     = "Interface"
      + vpc_id                = (known after apply)

      + dns_options (known after apply)

      + subnet_configuration (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint.this["com.amazonaws.eu-west-2.kms"] will be created
  + resource "aws_vpc_endpoint" "this" {
      + arn                   = (known after apply)
      + cidr_blocks           = (known after apply)
      + dns_entry             = (known after apply)
      + id                    = (known after apply)
      + ip_address_type       = "ipv4"
      + network_interface_ids = (known after apply)
      + owner_id              = (known after apply)
      + policy                = (known after apply)
      + prefix_list_id        = (known after apply)
      + private_dns_enabled   = true
      + requester_managed     = (known after apply)
      + route_table_ids       = (known after apply)
      + security_group_ids    = (known after apply)
      + service_name          = "com.amazonaws.eu-west-2.kms"
      + service_region        = (known after apply)
      + state                 = (known after apply)
      + subnet_ids            = (known after apply)
      + tags_all              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_endpoint_type     = "Interface"
      + vpc_id                = (known after apply)

      + dns_options (known after apply)

      + subnet_configuration (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint.this["com.amazonaws.eu-west-2.logs"] will be created
  + resource "aws_vpc_endpoint" "this" {
      + arn                   = (known after apply)
      + cidr_blocks           = (known after apply)
      + dns_entry             = (known after apply)
      + id                    = (known after apply)
      + ip_address_type       = "ipv4"
      + network_interface_ids = (known after apply)
      + owner_id              = (known after apply)
      + policy                = (known after apply)
      + prefix_list_id        = (known after apply)
      + private_dns_enabled   = true
      + requester_managed     = (known after apply)
      + route_table_ids       = (known after apply)
      + security_group_ids    = (known after apply)
      + service_name          = "com.amazonaws.eu-west-2.logs"
      + service_region        = (known after apply)
      + state                 = (known after apply)
      + subnet_ids            = (known after apply)
      + tags_all              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_endpoint_type     = "Interface"
      + vpc_id                = (known after apply)

      + dns_options (known after apply)

      + subnet_configuration (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint.this["com.amazonaws.eu-west-2.monitoring"] will be created
  + resource "aws_vpc_endpoint" "this" {
      + arn                   = (known after apply)
      + cidr_blocks           = (known after apply)
      + dns_entry             = (known after apply)
      + id                    = (known after apply)
      + ip_address_type       = "ipv4"
      + network_interface_ids = (known after apply)
      + owner_id              = (known after apply)
      + policy                = (known after apply)
      + prefix_list_id        = (known after apply)
      + private_dns_enabled   = true
      + requester_managed     = (known after apply)
      + route_table_ids       = (known after apply)
      + security_group_ids    = (known after apply)
      + service_name          = "com.amazonaws.eu-west-2.monitoring"
      + service_region        = (known after apply)
      + state                 = (known after apply)
      + subnet_ids            = (known after apply)
      + tags_all              = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_endpoint_type     = "Interface"
      + vpc_id                = (known after apply)

      + dns_options (known after apply)

      + subnet_configuration (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint_policy.this["com.amazonaws.eu-west-2.ecr.api"] will be created
  + resource "aws_vpc_endpoint_policy" "this" {
      + id              = (known after apply)
      + policy          = (known after apply)
      + vpc_endpoint_id = (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint_policy.this["com.amazonaws.eu-west-2.ecr.dkr"] will be created
  + resource "aws_vpc_endpoint_policy" "this" {
      + id              = (known after apply)
      + policy          = (known after apply)
      + vpc_endpoint_id = (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint_policy.this["com.amazonaws.eu-west-2.ecs"] will be created
  + resource "aws_vpc_endpoint_policy" "this" {
      + id              = (known after apply)
      + policy          = (known after apply)
      + vpc_endpoint_id = (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint_policy.this["com.amazonaws.eu-west-2.elasticloadbalancing"] will be created
  + resource "aws_vpc_endpoint_policy" "this" {
      + id              = (known after apply)
      + policy          = (known after apply)
      + vpc_endpoint_id = (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint_policy.this["com.amazonaws.eu-west-2.kms"] will be created
  + resource "aws_vpc_endpoint_policy" "this" {
      + id              = (known after apply)
      + policy          = (known after apply)
      + vpc_endpoint_id = (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint_policy.this["com.amazonaws.eu-west-2.logs"] will be created
  + resource "aws_vpc_endpoint_policy" "this" {
      + id              = (known after apply)
      + policy          = (known after apply)
      + vpc_endpoint_id = (known after apply)
    }

  # module.interface_endpoints.aws_vpc_endpoint_policy.this["com.amazonaws.eu-west-2.monitoring"] will be created
  + resource "aws_vpc_endpoint_policy" "this" {
      + id              = (known after apply)
      + policy          = (known after apply)
      + vpc_endpoint_id = (known after apply)
    }

  # module.route53_new_zone.aws_route53_record.alias will be created
  + resource "aws_route53_record" "alias" {
      + allow_overwrite = (known after apply)
      + fqdn            = (known after apply)
      + id              = (known after apply)
      + name            = "threatcomposer.techwithaden.com"
      + type            = "A"
      + zone_id         = (known after apply)

      + alias {
          + evaluate_target_health = false
          + name                   = (known after apply)
          + zone_id                = (known after apply)
        }
    }

  # module.route53_new_zone.aws_route53_record.delegate_subdomain_ns will be created
  + resource "aws_route53_record" "delegate_subdomain_ns" {
      + allow_overwrite = (known after apply)
      + fqdn            = (known after apply)
      + id              = (known after apply)
      + name            = "threatcomposer.techwithaden.com"
      + records         = (known after apply)
      + ttl             = 300
      + type            = "NS"
      + zone_id         = "Z026992313GOBRYA4Z0QR"
    }

  # module.route53_new_zone.aws_route53_zone.this will be created
  + resource "aws_route53_zone" "this" {
      + arn                 = (known after apply)
      + comment             = "Managed by Terraform"
      + force_destroy       = false
      + id                  = (known after apply)
      + name                = "threatcomposer.techwithaden.com"
      + name_servers        = (known after apply)
      + primary_name_server = (known after apply)
      + tags_all            = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + zone_id             = (known after apply)
    }

  # module.vpc.aws_cloudwatch_log_group.vpc_flow_logs will be created
  + resource "aws_cloudwatch_log_group" "vpc_flow_logs" {
      + arn               = (known after apply)
      + id                = (known after apply)
      + kms_key_id        = (known after apply)
      + log_group_class   = (known after apply)
      + name              = "/aws/vpc/flow-logs"
      + name_prefix       = (known after apply)
      + retention_in_days = 7
      + skip_destroy      = false
      + tags_all          = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
    }

  # module.vpc.aws_internet_gateway.IGW will be created
  + resource "aws_internet_gateway" "IGW" {
      + arn      = (known after apply)
      + id       = (known after apply)
      + owner_id = (known after apply)
      + tags_all = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id   = (known after apply)
    }

  # module.vpc.aws_kms_alias.vpc_flow_logs will be created
  + resource "aws_kms_alias" "vpc_flow_logs" {
      + arn            = (known after apply)
      + id             = (known after apply)
      + name           = "alias/vpc-flow-logs-key"
      + name_prefix    = (known after apply)
      + target_key_arn = (known after apply)
      + target_key_id  = (known after apply)
    }

  # module.vpc.aws_kms_key.vpc_flow_logs will be created
  + resource "aws_kms_key" "vpc_flow_logs" {
      + arn                                = (known after apply)
      + bypass_policy_lockout_safety_check = false
      + customer_master_key_spec           = "SYMMETRIC_DEFAULT"
      + description                        = "KMS key for VPC Flow Logs (CloudWatch Logs encryption)"
      + enable_key_rotation                = true
      + id                                 = (known after apply)
      + is_enabled                         = true
      + key_id                             = (known after apply)
      + key_usage                          = "ENCRYPT_DECRYPT"
      + multi_region                       = (known after apply)
      + policy                             = jsonencode(
            {
              + Statement = [
                  + {
                      + Action    = "kms:*"
                      + Effect    = "Allow"
                      + Principal = {
                          + AWS = "arn:aws:iam::175798131198:root"
                        }
                      + Resource  = "*"
                      + Sid       = "EnableRootPermissions"
                    },
                  + {
                      + Action    = [
                          + "kms:ReEncrypt*",
                          + "kms:GenerateDataKey*",
                          + "kms:Encrypt",
                          + "kms:DescribeKey",
                          + "kms:Decrypt",
                        ]
                      + Condition = {
                          + ArnLike      = {
                              + "kms:EncryptionContext:aws:logs:arn" = "arn:aws:logs:eu-west-2:175798131198:log-group:*"
                            }
                          + StringEquals = {
                              + "kms:ViaService" = "logs.eu-west-2.amazonaws.com"
                            }
                        }
                      + Effect    = "Allow"
                      + Principal = {
                          + Service = "logs.eu-west-2.amazonaws.com"
                        }
                      + Resource  = "*"
                      + Sid       = "AllowCloudWatchLogsUseOfKey"
                    },
                  + {
                      + Action    = "kms:CreateGrant"
                      + Condition = {
                          + Bool         = {
                              + "kms:GrantIsForAWSResource" = "true"
                            }
                          + StringEquals = {
                              + "kms:ViaService" = "logs.eu-west-2.amazonaws.com"
                            }
                        }
                      + Effect    = "Allow"
                      + Principal = {
                          + Service = "logs.eu-west-2.amazonaws.com"
                        }
                      + Resource  = "*"
                      + Sid       = "AllowCloudWatchLogsCreateGrant"
                    },
                ]
              + Version   = "2012-10-17"
            }
        )
      + rotation_period_in_days            = (known after apply)
      + tags_all                           = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
    }

  # module.vpc.aws_route.public_internet_gateway_route will be created
  + resource "aws_route" "public_internet_gateway_route" {
      + destination_cidr_block = "0.0.0.0/0"
      + gateway_id             = (known after apply)
      + id                     = (known after apply)
      + instance_id            = (known after apply)
      + instance_owner_id      = (known after apply)
      + network_interface_id   = (known after apply)
      + origin                 = (known after apply)
      + route_table_id         = (known after apply)
      + state                  = (known after apply)
    }

  # module.vpc.aws_route_table.private_rt will be created
  + resource "aws_route_table" "private_rt" {
      + arn              = (known after apply)
      + id               = (known after apply)
      + owner_id         = (known after apply)
      + propagating_vgws = (known after apply)
      + route            = (known after apply)
      + tags_all         = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id           = (known after apply)
    }

  # module.vpc.aws_route_table.public_rt will be created
  + resource "aws_route_table" "public_rt" {
      + arn              = (known after apply)
      + id               = (known after apply)
      + owner_id         = (known after apply)
      + propagating_vgws = (known after apply)
      + route            = (known after apply)
      + tags_all         = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id           = (known after apply)
    }

  # module.vpc.aws_route_table_association.private_rt_association["private-0"] will be created
  + resource "aws_route_table_association" "private_rt_association" {
      + id             = (known after apply)
      + route_table_id = (known after apply)
      + subnet_id      = (known after apply)
    }

  # module.vpc.aws_route_table_association.private_rt_association["private-1"] will be created
  + resource "aws_route_table_association" "private_rt_association" {
      + id             = (known after apply)
      + route_table_id = (known after apply)
      + subnet_id      = (known after apply)
    }

  # module.vpc.aws_route_table_association.public_rt_association["public-0"] will be created
  + resource "aws_route_table_association" "public_rt_association" {
      + id             = (known after apply)
      + route_table_id = (known after apply)
      + subnet_id      = (known after apply)
    }

  # module.vpc.aws_route_table_association.public_rt_association["public-1"] will be created
  + resource "aws_route_table_association" "public_rt_association" {
      + id             = (known after apply)
      + route_table_id = (known after apply)
      + subnet_id      = (known after apply)
    }

  # module.vpc.aws_subnet.private_subnet["private-0"] will be created
  + resource "aws_subnet" "private_subnet" {
      + arn                                            = (known after apply)
      + assign_ipv6_address_on_creation                = false
      + availability_zone                              = "eu-west-2a"
      + availability_zone_id                           = (known after apply)
      + cidr_block                                     = "10.0.3.0/24"
      + enable_dns64                                   = false
      + enable_resource_name_dns_a_record_on_launch    = false
      + enable_resource_name_dns_aaaa_record_on_launch = false
      + id                                             = (known after apply)
      + ipv6_cidr_block_association_id                 = (known after apply)
      + ipv6_native                                    = false
      + map_public_ip_on_launch                        = false
      + owner_id                                       = (known after apply)
      + private_dns_hostname_type_on_launch            = (known after apply)
      + tags_all                                       = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id                                         = (known after apply)
    }

  # module.vpc.aws_subnet.private_subnet["private-1"] will be created
  + resource "aws_subnet" "private_subnet" {
      + arn                                            = (known after apply)
      + assign_ipv6_address_on_creation                = false
      + availability_zone                              = "eu-west-2b"
      + availability_zone_id                           = (known after apply)
      + cidr_block                                     = "10.0.4.0/24"
      + enable_dns64                                   = false
      + enable_resource_name_dns_a_record_on_launch    = false
      + enable_resource_name_dns_aaaa_record_on_launch = false
      + id                                             = (known after apply)
      + ipv6_cidr_block_association_id                 = (known after apply)
      + ipv6_native                                    = false
      + map_public_ip_on_launch                        = false
      + owner_id                                       = (known after apply)
      + private_dns_hostname_type_on_launch            = (known after apply)
      + tags_all                                       = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id                                         = (known after apply)
    }

  # module.vpc.aws_subnet.public_subnet["public-0"] will be created
  + resource "aws_subnet" "public_subnet" {
      + arn                                            = (known after apply)
      + assign_ipv6_address_on_creation                = false
      + availability_zone                              = "eu-west-2a"
      + availability_zone_id                           = (known after apply)
      + cidr_block                                     = "10.0.1.0/24"
      + enable_dns64                                   = false
      + enable_resource_name_dns_a_record_on_launch    = false
      + enable_resource_name_dns_aaaa_record_on_launch = false
      + id                                             = (known after apply)
      + ipv6_cidr_block_association_id                 = (known after apply)
      + ipv6_native                                    = false
      + map_public_ip_on_launch                        = true
      + owner_id                                       = (known after apply)
      + private_dns_hostname_type_on_launch            = (known after apply)
      + tags_all                                       = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id                                         = (known after apply)
    }

  # module.vpc.aws_subnet.public_subnet["public-1"] will be created
  + resource "aws_subnet" "public_subnet" {
      + arn                                            = (known after apply)
      + assign_ipv6_address_on_creation                = false
      + availability_zone                              = "eu-west-2b"
      + availability_zone_id                           = (known after apply)
      + cidr_block                                     = "10.0.2.0/24"
      + enable_dns64                                   = false
      + enable_resource_name_dns_a_record_on_launch    = false
      + enable_resource_name_dns_aaaa_record_on_launch = false
      + id                                             = (known after apply)
      + ipv6_cidr_block_association_id                 = (known after apply)
      + ipv6_native                                    = false
      + map_public_ip_on_launch                        = true
      + owner_id                                       = (known after apply)
      + private_dns_hostname_type_on_launch            = (known after apply)
      + tags_all                                       = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id                                         = (known after apply)
    }

  # module.vpc.aws_vpc.main_vpc will be created
  + resource "aws_vpc" "main_vpc" {
      + arn                                  = (known after apply)
      + cidr_block                           = "10.0.0.0/16"
      + default_network_acl_id               = (known after apply)
      + default_route_table_id               = (known after apply)
      + default_security_group_id            = (known after apply)
      + dhcp_options_id                      = (known after apply)
      + enable_dns_hostnames                 = true
      + enable_dns_support                   = true
      + enable_network_address_usage_metrics = (known after apply)
      + id                                   = (known after apply)
      + instance_tenancy                     = "default"
      + ipv6_association_id                  = (known after apply)
      + ipv6_cidr_block                      = (known after apply)
      + ipv6_cidr_block_network_border_group = (known after apply)
      + main_route_table_id                  = (known after apply)
      + owner_id                             = (known after apply)
      + tags_all                             = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
    }

  # module.vpce_sg.aws_security_group.this will be created
  + resource "aws_security_group" "this" {
      + arn                    = (known after apply)
      + description            = "Security group for Interface VPC Endpoints (allow 443 from VPC)"
      + egress                 = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "Allow all egress"
              + from_port        = 0
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "-1"
              + security_groups  = []
              + self             = false
              + to_port          = 0
            },
        ]
      + id                     = (known after apply)
      + ingress                = [
          + {
              + cidr_blocks      = [
                  + "10.0.0.0/16",
                ]
              + description      = "Allow HTTPS from within VPC"
              + from_port        = 443
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 443
            },
        ]
      + name                   = "VPCE_SG"
      + name_prefix            = (known after apply)
      + owner_id               = (known after apply)
      + revoke_rules_on_delete = false
      + tags_all               = {
          + "Environment" = "Development"
          + "ManagedBy"   = "Terraform"
          + "Owner"       = "Asli Aden"
          + "Project"     = "Threat Composer App"
        }
      + vpc_id                 = (known after apply)
    }

Plan: 45 to add, 0 to change, 0 to destroy.
